!function(){var t={};function i(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,a=Array(i);e<i;e++)a[e]=t[e];return a}function a(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);if("Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=new(function(){var t,e;function r(t){!function(t,i){if(!(t instanceof i))throw TypeError("Cannot call a class as a function")}(this,r),this.initialState=t,this.table=document.querySelector(".game-field"),this.items=this.table.querySelectorAll(".field-cell"),this.score=document.querySelector(".game-score"),this.loseM=document.querySelector(".message-lose"),this.startM=document.querySelector(".message-start"),this.winM=document.querySelector(".message-win"),this.sum=0}return t=[{key:"numToAdd",value:function(){return 1===Math.ceil(10*Math.random())?4:2}},{key:"addNum",value:function(){for(var t=0,i=0;i<4;i++)for(var e=0;e<4;e++)0===this.initialState[i][e]&&t++;for(var a=0;a<4;a++)for(var r=0;r<4;r++)if(0===this.initialState[a][r]){if(1===Math.ceil(Math.random()*t)){this.initialState[a][r]=this.numToAdd(),this.setNums(),this.getScore();return}t--}}},{key:"start",value:function(){this.addNum(),this.addNum(),this.startM.classList.add("hidden")}},{key:"setNums",value:function(){for(var t=0,i=0,e=0;e<16;e++)this.items[e].textContent=this.initialState[t][i],i++,"0"===this.items[e].textContent&&(this.items[e].textContent=""),"2048"===this.items[e].textContent&&(this.startM.classList.add("hidden"),this.winM.classList.remove("hidden")),2===this.items[e].classList.length&&this.items[e].classList.remove(this.items[e].classList[1]),this.items[e].classList.add("field-cell--".concat(this.items[e].textContent)),4===i&&(t++,i=0)}},{key:"moveLeft",value:function(){for(var t=[a(this.initialState[0]),a(this.initialState[1]),a(this.initialState[2]),a(this.initialState[3])],i=0;i<4;i++){for(var e=this.initialState[i],r=3;r>=0;r--)0===e[r]&&e.splice(r,1);for(var n=0;n<4;n++)void 0===e[n]&&e.push(0);for(var s=0;s<4;s++)e[s]===e[s+1]&&(e[s]*=2,this.sum+=e[s],e.splice(s+1,1),e.push(0))}for(var o=0;o<4;o++)for(var l=0;l<4;l++)if(t[o][l]!==this.initialState[o][l]){this.addNum();return}}},{key:"moveRight",value:function(){for(var t=[a(this.initialState[0]),a(this.initialState[1]),a(this.initialState[2]),a(this.initialState[3])],i=0;i<4;i++){for(var e=this.initialState[i],r=3;r>=0;r--)0===e[r]&&e.splice(r,1);for(var n=0;n<4;n++)void 0===e[n]&&e.unshift(0);for(var s=3;s>=0;s--)e[s]===e[s-1]&&(e[s]*=2,this.sum+=e[s],e.splice(s-1,1),e.unshift(0))}for(var o=0;o<4;o++)for(var l=0;l<4;l++)if(t[o][l]!==this.initialState[o][l]){this.addNum();return}}},{key:"moveUp",value:function(){for(var t=this,i=[a(this.initialState[0]),a(this.initialState[1]),a(this.initialState[2]),a(this.initialState[3])],e=0;e<4;e++)!function(i){for(var e=[],a=0;a<4;a++)e.push(t.initialState[a][i]);for(var r=e.filter(function(t){return 0!==t});r.length<4;)r.push(0);for(var n=0;n<4;n++)r[n]===r[n+1]&&(r[n]*=2,t.sum+=r[n],r.splice(n+1,1),r.push(0));for(var s=0;s<4;s++)t.initialState[s][i]=r[s]}(e);for(var r=0;r<4;r++)for(var n=0;n<4;n++)if(i[r][n]!==this.initialState[r][n]){this.addNum();return}}},{key:"moveDown",value:function(){for(var t=this,i=[a(this.initialState[0]),a(this.initialState[1]),a(this.initialState[2]),a(this.initialState[3])],e=0;e<4;e++)!function(i){for(var e=[],a=0;a<4;a++)e.push(t.initialState[a][i]);for(var r=e.filter(function(t){return 0!==t});r.length<4;)r.unshift(0);for(var n=3;n>=0;n--)r[n]===r[n-1]&&(r[n]*=2,t.sum+=r[n],r.splice(n-1,1),r.unshift(0));for(var s=0;s<4;s++)t.initialState[s][i]=r[s]}(e);for(var r=0;r<4;r++)for(var n=0;n<4;n++)if(i[r][n]!==this.initialState[r][n]){this.addNum();return}}},{key:"getScore",value:function(){this.score.textContent=this.sum}},{key:"getState",value:function(){}},{key:"getStatus",value:function(){for(var t=0;t<4;t++){if(this.initialState[t].includes(0))return;for(var i=0;i<3;i++)if(this.initialState[t][i]===this.initialState[t][i+1])return}for(var e=0;e<3;e++)for(var a=0;a<4;a++)if(this.initialState[e][a]===this.initialState[e+1][a])return;this.loseM.classList.remove("hidden"),this.startM.classList.add("hidden")}},{key:"restart",value:function(){var t=!0,i=!1,e=void 0;try{for(var a,r=this.initialState[Symbol.iterator]();!(t=(a=r.next()).done);t=!0)for(var n=a.value,s=0;s<4;s++)n[s]=0}catch(t){i=!0,e=t}finally{try{t||null==r.return||r.return()}finally{if(i)throw e}}!1===this.loseM.classList.contains("hidden")&&(this.loseM.classList.add("hidden"),this.startM.classList.remove("hidden")),!1===this.winM.classList.contains("hidden")&&(this.winM.classList.add("hidden"),this.startM.classList.remove("hidden")),this.sum=0,this.start()}}],i(r.prototype,t),e&&i(r,e),r}())([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),n=document.querySelector(".button");n.addEventListener("click",function(){"Restart"!==n.textContent&&(n.classList.remove("start"),n.classList.add("restart"),n.innerHTML="Restart"),"Restart"===n.textContent&&r.restart()}),document.addEventListener("keydown",function(){var t=event.key;"ArrowUp"===t&&(r.moveUp(),r.getStatus()),"ArrowDown"===t&&(r.moveDown(),r.getStatus()),"ArrowRight"===t&&(r.moveRight(),r.getStatus()),"ArrowLeft"===t&&(r.moveLeft(),r.getStatus())})}();
//# sourceMappingURL=index.bd960b3f.js.map
