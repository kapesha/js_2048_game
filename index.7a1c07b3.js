var t={};const i=new class{constructor(t){this.initialState=t,this.table=document.querySelector(".game-field"),this.items=this.table.querySelectorAll(".field-cell"),this.score=document.querySelector(".game-score"),this.loseM=document.querySelector(".message-lose"),this.startM=document.querySelector(".message-start"),this.winM=document.querySelector(".message-win"),this.sum=0}numToAdd(){return 1===Math.ceil(10*Math.random())?4:2}addNum(){let t=0;for(let i=0;i<4;i++)for(let e=0;e<4;e++)0===this.initialState[i][e]&&t++;for(let i=0;i<4;i++)for(let e=0;e<4;e++)if(0===this.initialState[i][e]){if(1===Math.ceil(Math.random()*t)){this.initialState[i][e]=this.numToAdd(),this.setNums(),this.getScore();return}t--}}start(){this.addNum(),this.addNum(),this.startM.classList.add("hidden")}setNums(){let t=0,i=0;for(let e=0;e<16;e++)this.items[e].textContent=this.initialState[t][i],i++,"0"===this.items[e].textContent&&(this.items[e].textContent=""),"2048"===this.items[e].textContent&&(this.startM.classList.add("hidden"),this.winM.classList.remove("hidden")),2===this.items[e].classList.length&&this.items[e].classList.remove(this.items[e].classList[1]),this.items[e].classList.add(`field-cell--${this.items[e].textContent}`),4===i&&(t++,i=0)}moveLeft(){let t=[[...this.initialState[0]],[...this.initialState[1]],[...this.initialState[2]],[...this.initialState[3]]];for(let t=0;t<4;t++){let i=this.initialState[t];for(let t=3;t>=0;t--)0===i[t]&&i.splice(t,1);for(let t=0;t<4;t++)void 0===i[t]&&i.push(0);for(let t=0;t<4;t++)i[t]===i[t+1]&&(i[t]*=2,this.sum+=i[t],i.splice(t+1,1),i.push(0))}for(let i=0;i<4;i++)for(let e=0;e<4;e++)if(t[i][e]!==this.initialState[i][e]){this.addNum();return}}moveRight(){let t=[[...this.initialState[0]],[...this.initialState[1]],[...this.initialState[2]],[...this.initialState[3]]];for(let t=0;t<4;t++){let i=this.initialState[t];for(let t=3;t>=0;t--)0===i[t]&&i.splice(t,1);for(let t=0;t<4;t++)void 0===i[t]&&i.unshift(0);for(let t=3;t>=0;t--)i[t]===i[t-1]&&(i[t]*=2,this.sum+=i[t],i.splice(t-1,1),i.unshift(0))}for(let i=0;i<4;i++)for(let e=0;e<4;e++)if(t[i][e]!==this.initialState[i][e]){this.addNum();return}}moveUp(){let t=[[...this.initialState[0]],[...this.initialState[1]],[...this.initialState[2]],[...this.initialState[3]]];for(let t=0;t<4;t++){let i=[];for(let e=0;e<4;e++)i.push(this.initialState[e][t]);let e=i.filter(t=>0!==t);for(;e.length<4;)e.push(0);for(let t=0;t<4;t++)e[t]===e[t+1]&&(e[t]*=2,this.sum+=e[t],e.splice(t+1,1),e.push(0));for(let i=0;i<4;i++)this.initialState[i][t]=e[i]}for(let i=0;i<4;i++)for(let e=0;e<4;e++)if(t[i][e]!==this.initialState[i][e]){this.addNum();return}}moveDown(){let t=[[...this.initialState[0]],[...this.initialState[1]],[...this.initialState[2]],[...this.initialState[3]]];for(let t=0;t<4;t++){let i=[];for(let e=0;e<4;e++)i.push(this.initialState[e][t]);let e=i.filter(t=>0!==t);for(;e.length<4;)e.unshift(0);for(let t=3;t>=0;t--)e[t]===e[t-1]&&(e[t]*=2,this.sum+=e[t],e.splice(t-1,1),e.unshift(0));for(let i=0;i<4;i++)this.initialState[i][t]=e[i]}for(let i=0;i<4;i++)for(let e=0;e<4;e++)if(t[i][e]!==this.initialState[i][e]){this.addNum();return}}getScore(){this.score.textContent=this.sum}getState(){}getStatus(){for(let t=0;t<4;t++){if(this.initialState[t].includes(0))return;for(let i=0;i<3;i++)if(this.initialState[t][i]===this.initialState[t][i+1])return}for(let t=0;t<3;t++)for(let i=0;i<4;i++)if(this.initialState[t][i]===this.initialState[t+1][i])return;this.loseM.classList.remove("hidden"),this.startM.classList.add("hidden")}restart(){for(let t of this.initialState)for(let i=0;i<4;i++)t[i]=0;!1===this.loseM.classList.contains("hidden")&&(this.loseM.classList.add("hidden"),this.startM.classList.remove("hidden")),!1===this.winM.classList.contains("hidden")&&(this.winM.classList.add("hidden"),this.startM.classList.remove("hidden")),this.sum=0,this.start()}}([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),e=document.querySelector(".button");e.addEventListener("click",()=>{"Restart"!==e.textContent&&(e.classList.remove("start"),e.classList.add("restart"),e.innerHTML="Restart"),"Restart"===e.textContent&&i.restart()}),document.addEventListener("keydown",()=>{let t=event.key;"ArrowUp"===t&&(i.moveUp(),i.getStatus()),"ArrowDown"===t&&(i.moveDown(),i.getStatus()),"ArrowRight"===t&&(i.moveRight(),i.getStatus()),"ArrowLeft"===t&&(i.moveLeft(),i.getStatus())});
//# sourceMappingURL=index.7a1c07b3.js.map
